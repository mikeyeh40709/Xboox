@model IEnumerable<Xboox.ViewModels.ProductDetailViewModel>


@{
    ViewBag.Title = "FilterBooks";
}

<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__links">
                    <a href="/"><i class="fa fa-home"></i> Home</a>
                    @*@Html.ActionLink("中文書", "ShowAllBooks", "BookCategory",null, new { hidefocus="hidefocus"})*@
                    <a href="@Url.Action("ShowBooks","BookCategory", new { id= ViewBag.CategoryID})"><span>@ViewBag.Category</span></a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb End -->
<!-- Shop Section Begin -->
<section class="shop spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3">
                <div class="shop__sidebar">
                    <div class="sidebar__sizes">
                        <div class="section-title">
                            <h4>Select by category</h4>
                        </div>
                        @*<div class="filter__controls size__list">
                                @Html.Partial("_SideBarCategoryPartial")
                            </div>*@
                        <ul class="filter__controls" id="shoptags">
                            @Html.Partial("_SideBarCategoryPartial")
                        </ul>
                    </div>
                    @Html.Partial("_SideBarFilter")
                    <div class="trend__content">
                        <div class="section-title">
                            <h4>New in @ViewBag.Category</h4>
                        </div>
                        @foreach (var item in Model.Where(x => x.PublishedDate.Substring(0, 7) == "2020/08").Take(3))
                        {
                            @Html.Partial("_SidebarSuggestion", item)
                        }
                    </div>
                    <div class="trend__content">
                        <div class="section-title">
                            <h4>Top Selling in @ViewBag.Category</h4>
                        </div>
                        @foreach (var item in Model.Where(x => x.UnitInStock == 100).Take(3))
                        {
                            @Html.Partial("_SidebarSuggestion", item)
                        }
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-9">
                <div class="row property__gallery">
                    @foreach (var Book in Model)
                    {
                        @Html.Partial("_BookCategoryPartialView", Book);
                    }
                    <div class="col-lg-12 text-center">
                        <div class="pagination__option">
                            <a href="#">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#"><i class="fa fa-angle-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Shop Section End -->

@section endCSS{
    <style>
        #shoptags li {
            display: table;
            margin: 10px 0;
        }
    </style>
}
@section endJS{
    <script>
        function PriceFilter() {
            let maxPrice = document.getElementById("maxamount").value.substring(1);
            let minPrice = document.getElementById("minamount").value.substring(1);
            let UrlIdArray = (window.location.href).split('/');
            let Id = UrlIdArray[UrlIdArray.length - 1];
            let data = {
                maxPrice: maxPrice,
                minPrice: minPrice,
                Id: Id
            }
            $.ajax({
                url: '/BookCategory/FilterBooks',
                type: 'Get',
                data: data
            })
        }
    </script>
}
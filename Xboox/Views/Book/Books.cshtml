@model IEnumerable<Xboox.ViewModels.ProductDetailViewModel>


@{
    ViewBag.Title = "Books";
}

<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__links">
                    <a href="/"><i class="fa fa-home"></i> Home</a>
                    @if (Request.Url.Segments[1] == "Find/")
                    {
                        <span>搜尋結果</span> //Find/MVC
                    }
                    //Books/All/300-600
                    else if (Request.Url.Segments.Length == 4)
                    {
                        <a href="/Books/@ViewBag.Category"><span>@ViewBag.Category</span></a>
                        <span>搜尋結果</span>
                    }
                    //Books/All
                    else
                    {
                        <span>@ViewBag.Category</span>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb End -->
<!-- Shop Section Begin -->
<section class="shop spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3">
                <div class="shop__sidebar">
                    <div class="sidebar__sizes">
                        <div class="section-title">
                            <h4>Select by category</h4>
                        </div>
                        <ul class="filter__controls" id="shoptags">
                            @Html.Partial("_SideBarCategoryPartial")
                        </ul>
                    </div>
                    @Html.Partial("_SideBarFilter")
                    <div class="trend__content">
                        <div class="section-title">
                            <h4>New in "@ViewBag.Category"</h4>
                        </div>
                        @foreach (var item in Model.Where(x => x.PublishedDate.Substring(0, 7) == "2020/08").Take(3))
                        {
                            @Html.Partial("_SidebarSuggestion", item)
                        }
                    </div>
                    <div class="trend__content">
                        <div class="section-title">
                            <h4>Top Selling in "@ViewBag.Category"</h4>
                        </div>
                        @foreach (var item in Model.Where(x => x.UnitInStock <= 5).Take(3))
                        {
                            @Html.Partial("_SidebarSuggestion", item)
                        }
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-9">
                @if (Request.Url.Segments[1] == "Find/")
                {
                    <h4>查詢關鍵字: @ViewBag.Category, 搜尋結果共 @ViewBag.Result 筆</h4> //Find/MVC
                }
                //Books/All/300-600
                else if (Request.Url.Segments.Length == 4)
                {
                    <h4>於@(ViewBag.Category) 類別,查詢價格區間: $@Request.Url.Segments[3].Split('-')[0] - $@Request.Url.Segments[3].Split('-')[1], 搜尋結果共 @ViewBag.Result 筆</h4>
                }
                <div class="row property__gallery">
                    @foreach (var Book in Model)
                    {
                        @Html.Partial("_BookCategoryPartialView", Book);
                    }
                    <div class="col-lg-12 text-center">
                        <div class="pagination__option">
                            <a href="#"><i class="fa fa-angle-left"></i></a>
                            <a href="#" class="active">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#"><i class="fa fa-angle-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


